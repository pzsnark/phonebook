{% extends 'base.html' %}
{% load format_mobile from tags %}

{% block title %}Телефонная книга{% endblock %}

{% block content %}
<header>
    <div class="displayname center"><a href="{{ request.path }}{% if company %}?company={{ company }}&sort=displayName{% else %}?sort=displayName{% endif %}">ФИО</a></div>
    <div class="title center"><a href="{{ request.path }}{% if company %}?company={{ company }}&sort=displayName{% else %}?sort=displayName{% endif %}">Должность</a></div>
    <div class="phone center"><a href="{{ request.path }}{% if company %}?company={{ company }}&sort=phone{% else %}?sort=phone{% endif %}">Телефон</a></div>
    <div class="mail center"><a href="{{ request.path }}{% if company %}?company={{ company }}&sort=mail{% else %}?sort=mail{% endif %}">Почта</a></div>
</header>
<main>
    {% if entries %}
        {% for entry in entries %}
            <div class="wrapper">
                <div class="displayname">
                    {% if entry.displayName == '[]' %}
                        Не определено
                    {% else %}
                    {% endif %}
                    <span id="2">{{ entry.displayName }}</span>
                </div>
                <div class="title" title="{{ entry.title }}">
                    {% if entry.title == '[]' %}
                    {% else %}
                        {{ entry.title|truncatechars:20 }}
                    {% endif %}
                </div>
                <div class="phone">
                    {% if entry.telephoneNumber == '[]' %}
                    {% else %}
                        {{ entry.telephoneNumber }}
                    {% endif %}
                </div>
                <div class="mail">
                    {% if entry.mail == '[]' %}
                    {% else %}
                        {{ entry.mail|lower }}
                    {% endif %}
                </div>
            </div>
            <div class="hidden">
                Мобильный: {{ entry.mobile|format_mobile }}<br>
                Местоположение: {{ entry.physicalDeliveryOfficeName }}<br>
                Отдел: {{ entry.department }}<br>
                Организация:
                {% if entry.company == 'ODS' %}
                    ОблДорСтрой
                {% elif entry.company == 'AVS' %}
                    АвтоВолгаСтрой
                {% elif entry.company == 'AVN' %}
                    Авангард
                {% elif entry.company == 'ABZ' %}
                    АБЗ №1
                {% elif entry.company == 'SMT' %}
                    СМУ Тольятти
                {% elif entry.company == 'SMS' %}
                    СМУ Самара
                {% elif entry.company == 'PNL' %}
                    ПНЛ
                {% elif entry.company == 'PRS' %}
                    Перспектива
                {% elif entry.company == 'VPR' %}
                    Волга-Проект
                {% else %}
                {% endif %}
            </div>
        {% endfor %}
    {% else %}
    <div class="wrapper">Контекст не найден</div>
    {% endif %}

    <br>
    <div class="wrapper">
        Всего записей: {{ entries|length }}
    </div>
</main>
{% endblock %}